"use strict";(self.webpackChunkasset_acquisition=self.webpackChunkasset_acquisition||[]).push([[9467,8824],{80668:function(e,t,a){var s=a(8766),i=a(67336),n=a(96607),r=a(2238),o=a(19149);t.A=(0,o.p2)((({billing_country:e,billing_currency:t,items:a,products:o,purchase_type:d,coupon:l,location_id:c})=>{const u=!!a,p=u?(0,s.eO)(a):i.eO(o);let g=u?(0,n.lP)(a,t):r.l(o);return c&&(g=g.map((e=>({...e,location_id:c})))),{event:"add_to_cart",billing_country:e,billing_currency:t,local_price:(0,s.$g)(p),purchase_type:d,item_id:g.map((({item_id:e})=>e)).join(","),ui_element_location:c,ecommerce:{value:(0,s.kg)(p,t),currency:"USD",items:g,...l&&{coupon:l}}}}))},84182:function(e,t,a){a.d(t,{Z:function(){return o}});var s=a(3024),i=a.n(s);class n{constructor(e){this.trackingData=e}defaultData(){return{source:this.trackingData.site_nickname,properties:{accept_lang:this.trackingData.language,auth_state:this.trackingData.auth_state,country:this.trackingData.billing_country||this.trackingData.geolocation_country,experiences:this.trackingData.spectrum_experiences,industry:this.trackingData.industry_segment,referer:document.referrer,request_id:this.trackingData.request_id,RF_plus_enabled:this.trackingData.has_expansion_bundle,target_search_mix:this.trackingData.target_search_mix,url:this.trackingData.url,user_agent:this.trackingData.user_agent,user_id:this.trackingData.userid,visitor_count:this.trackingData.visitor_count,visitor_id:this.trackingData.visitor_id}}}assetData(e){return{asset_id:e.id||e.asset_id||e.assetId,search_position:e.slot,asset_metadata:{editorial_products:e.editorial_products||e.editorialProducts,asset_family:e.asset_family||e.assetFamily||e.family,asset_type:e.asset_type||e.assetType,has_nudity:e.has_nudity||e.hasNudity}}}searchData(e){return{asset_ids:e.asset_ids,asset_family:e.asset_family,creative_assets_type:e.creative_assets_type,exclude_nudity:e.exclude_nudity,license:e.license,number_of_concepts:e.number_of_concepts,page_number:e.page_number,pa_agreement_filter:e.pa_agreement_filter,sbi:e.sbi,search_page_format:e.search_page_format,sort_type:e.sort_type,phrase:e.phrase,queried_keywords_by_clause:e.queried_keywords_by_clause,total_number_of_results:e.total_number_of_results}}adpCategoryLinkClickSignalData(e){const t=this.defaultData();return t.event="ADP Category Link Click",t.properties={...t.properties,...e},t}adpCategoryBrowseClickSignalData(e){const t=this.defaultData();return t.event="ADP Category Browse Click",t.properties={...t.properties,...e},t}cartRemoveItemSignalData(e){const t=this.defaultData();return t.event="Cart Remove Item",t.properties={...t.properties,...e},t}chatRequestSuccessSignalData(e){const t=this.defaultData();return t.event="Chat Request Success",t.properties={...t.properties,...e},t}chatClosedSignalData(e){const t=this.defaultData();return t.event="Chat Closed",t.properties={...t.properties,...e},t}chatOpenDataSignalData(e){const t=this.defaultData();return t.event="Chat Open",t.properties={...t.properties,...e},t}pnpSubscriptionTermToggleSignalData(e){const t=this.defaultData();return t.event="PNP Subscription Term Toggle",t.properties={...t.properties,...e},t}pnpFaqSignalData(e){const t=this.defaultData();return t.event="PNP FAQ",t.properties={...t.properties,...e},t}boardCreatedSignalData(e,t){const a=this.defaultData();return a.event="Board Created",a.properties={...a.properties,board_id:e,...t},a}boardDeletedSignalData(e,t){const a=this.defaultData();return a.event="Board Deleted",a.properties={...a.properties,board_id:e,...t},a}boardItemRemovedSignalData(e,t,a){const s=this.defaultData();return s.event="Board Removed Item",s.properties={...s.properties,board_id:t,...this.assetData(e),...a},s}assetAddedToCartSignalData(e,t){const a=this.defaultData();return a.event="Asset Added To Cart",a.properties={...a.properties,...this.assetData(e),...t},a}assetDetailsViewedSignalData(e,t){const a=this.defaultData();return a.event="Asset Details Viewed",a.properties={...a.properties,...this.assetData(e),...t},a}assetCompDownloadedSignalData(e,t){const a=this.defaultData();return a.event="Asset Comp Downloaded",a.properties={...a.properties,...this.assetData(e),...t},a}assetPurchasedSignalData(e,t){const a=this.defaultData();return a.event="Asset Purchased",a.properties={...a.properties,...this.assetData(e),...t},a}assetDownloadedSignalData(e,t){const a=this.defaultData();return a.event="Asset Downloaded",a.properties={...a.properties,...this.assetData(e),...t},a}bulkDownloadedSignalData(e){const t=this.defaultData();return t.event="Bulk Downloaded",t.properties={...t.properties,...e},t}assetAddedToBoardSignalData(e,t,a){const s=this.defaultData();return s.event="Asset Added To Board",s.properties={...s.properties,...this.assetData(e),board_id:t,...a},s}itemSelectedSignalData(e,t,a,s){const i=this.defaultData();return i.event="Item Selected",i.properties={...i.properties,location:e,selection:{name:t,value:a},...s},i}assetImpressionsSignalData(e,t){const a=this.defaultData();return a.event="Asset Impression",a.properties={...a.properties,asset_ids:e,...t},a}searchSignalData(e,t){const a=this.defaultData();return a.event="Search Results Viewed",a.properties={...a.properties,...this.searchData(e),...t},a}searchMoreLikeThisSignalData(e,t){const a=this.defaultData();return a.event="Search More Like This Viewed",a.properties={...a.properties,...this.searchData(e),...t},a}async sendChatClosedSignal(e={}){return this.postSignal(this.chatClosedSignalData(e))}async sendBoardDeletedSignal(e,t={}){return this.postSignal(this.boardDeletedSignalData(e,t))}async sendAdpCategoryLinkClickSignal(e={}){return this.postSignal(this.adpCategoryLinkClickSignalData(e))}async sendAdpCategoryBrowseClickSignal(e={}){return this.postSignal(this.adpCategoryBrowseClickSignalData(e))}async sendCartRemoveItemSignal(e={}){return this.postSignal(this.cartRemoveItemSignalData(e))}async sendChatRequestSuccessSignal(e={}){return this.postSignal(this.chatRequestSuccessSignalData(e))}async sendChatOpenDataSignal(e={}){return this.postSignal(this.chatOpenDataSignalData(e))}async sendPnpFaqSignalSignal(e={}){return this.postSignal(this.pnpFaqSignalData(e))}async sendPnpSubscriptionTermToggleSignal(e={}){return this.postSignal(this.pnpSubscriptionTermToggleSignalData(e))}async sendAssetAddedToBoardSignal(e,t,a={}){return this.postSignal(this.assetAddedToBoardSignalData(e,t,a))}async sendAssetCompDownloadedSignal(e,t={}){return this.postSignal(this.assetCompDownloadedSignalData(e,t))}async sendBoardCreatedSignal(e={}){return this.postSignal(this.boardCreatedSignalData({}))}async sendAssetDownloadedSignal(e,t={}){return this.postSignal(this.assetDownloadedSignalData(e,t))}async sendBoardItemRemovedSignal(e,t,a={}){return this.postSignal(this.boardItemRemovedSignalData(e,t,a))}async sendAssetPurchasedSignal(e,t={}){return this.postSignal(this.assetPurchasedSignalData(e,t))}async sendBulkDownloadedSignal(e={}){return this.postSignal(this.bulkDownloadedSignalData(e))}async sendItemSelectedSignal(e,t,a,s={}){return this.postSignal(this.itemSelectedSignalData(e,t,a,s))}async sendAssetAddedToCartSignal(e,t={}){return this.postSignal(this.assetAddedToCartSignalData(e,t))}async sendAssetDetailsViewedSignal(e,t={}){return this.postSignal(this.assetDetailsViewedSignalData(e,t))}async sendAssetImpressionsSignal(e,t={}){return this.postSignal(this.assetImpressionsSignalData(e,t))}async sendSearchSignal(e,t={}){return this.postSignal(this.searchSignalData(e,t))}async postSignal(e){var t;e.pipeline_id=window.pipelineId,e.app_name=null===(t=window.application)||void 0===t?void 0:t.app_prefix;const a=`${this.trackingData.spectrum_host_three}signals`;try{"undefined"!=typeof window&&window.navigator&&window.navigator.sendBeacon?await window.navigator.sendBeacon(a,JSON.stringify([e])):await i().post(a,[e])}catch(e){return{}}}}var r=a(54168);const o=()=>{const e=(0,r.y)(),t=new n(e);return{sendAssetAddedToBoardSignal:(e,a,s)=>t.sendAssetAddedToBoardSignal(e,a,s),sendAssetAddedToCartSignal:(e,a)=>t.sendAssetAddedToCartSignal(e,a),sendAssetDetailsViewedSignal:(e,a)=>t.sendAssetDetailsViewedSignal(e,a),sendAssetCompDownloadedSignal:(e,a)=>t.sendAssetCompDownloadedSignal(e,a),sendAssetDownloadedSignal:(e,a)=>t.sendAssetDownloadedSignal(e,a),sendAssetImpressionsSignal:(e,a)=>t.sendAssetImpressionsSignal(e,a),sendBulkDownloadedSignal:e=>t.sendBulkDownloadedSignal(e),sendItemSelectedSignal:(e,a,s,i)=>t.sendItemSelectedSignal(e,a,s,i),sendSearchSignal:(e,a)=>t.sendSearchSignal(e,a),sendPnpSubscriptionTermToggleSignal:e=>t.sendPnpSubscriptionTermToggleSignal(e),sendAdpCategoryBrowseClickSignal:e=>t.sendAdpCategoryBrowseClickSignal(e),sendAdpCategoryLinkClickSignal:e=>t.sendAdpCategoryLinkClickSignal(e),sendChatRequestSuccessSignal:e=>t.sendChatRequestSuccessSignal(e),sendBoardItemRemovedSignal:(e,a,s)=>t.sendBoardItemRemovedSignal(e,a,s),sendAssetPurchasedSignal:(e,a)=>t.sendAssetPurchasedSignal(e,a),sendCartRemoveItemSignal:e=>t.sendCartRemoveItemSignal(e),sendBoardCreatedSignal:e=>t.sendBoardCreatedSignal(e),sendPnpFaqSignalSignal:e=>t.sendPnpFaqSignalSignal(e),sendChatOpenDataSignal:e=>t.sendChatOpenDataSignal(e),sendBoardDeletedSignal:(e,a)=>t.sendBoardDeletedSignal(e,a),sendChatClosedSignal:e=>t.sendChatClosedSignal(e)}}},98397:function(e,t,a){a.r(t),a.d(t,{default:function(){return L}});a(79998);var s=a(47006),i=a(34504),n=a(34125),r=a(69205),o=a(2070),d=a(20060),l=a(289),c=a(77201),u=a(38055),p=a(84182),g=a(80668),S=a(18628),_=a(77015),h=a(11298),y="save",w="add",D="update",v="updateAndView",A=a(1257),C=a(13620),m=a(61774),f=a(3903),T=a(20262),b=a(52278);var P=()=>{const e=(0,p.Z)(),{cartsService:t}=(0,_.A)(),a=(0,u.useQueryClient)(),{asset:s}=(0,c.Q)(),{selectedLimitedUseProduct:i}=(0,m.A)(),{savedLicensePreferencesPolicy:n}=(0,T.A)(),{selectedCustomLicense:{customLicenseDetails:r}}=(0,f.A)(),{genId:d,index:y}=(0,l.A)(),w=(0,o.useExperience)("GettySrpAddToCart"),{acquisitionType:v}=(0,b.h)(),P=C.A.CART_SRP_CONFIRMATION,k=C.A.CART_SRP_SELECT,I=e=>{var t;return null!==(t=window)&&void 0!==t&&null!==(t=t.tracking_data)&&void 0!==t&&t.asset_details?e.license_type&&e.asset_type?`${e.license_type[0].toUpperCase()+e.license_type.substring(1)}${"image"===e.asset_type?"Image":"Clip"}`:null:`${e.licenseType[0].toUpperCase()+e.licenseType.substring(1).toLowerCase()}${"image"===e.assetType.toLowerCase()?"Image":"Clip"}`},R=w.isActive()&&(v===P||v===k),O=({rawOriginalPrice:t,rawPrice:a})=>{var n,r;if(R)return;const o=null!==(n=window)&&void 0!==n&&null!==(n=n.tracking_data)&&void 0!==n&&n.asset_details?{...null===(r=window)||void 0===r||null===(r=r.tracking_data)||void 0===r?void 0:r.asset_details}:{...s};a>0&&(o.price=a,o.is_priced="priced"),i&&(o.limited_use_license_type=A.hd[i]);const d=(0,A.g9)(v),l=((e,t,a,i)=>{var n,r;return null!==(n=window)&&void 0!==n&&null!==(n=n.tracking_data)&&void 0!==n&&n.asset_details?{product_type:I(e),original_price:{amount:a},final_price:{amount:t},currency_code:(null===(r=window)||void 0===r||null===(r=r.tracking_data)||void 0===r?void 0:r.currency_code)||"USD",discount_type:a>t?"PricingAgreement":"None",location_id:i,...e}:{originalPrice:{amount:a},finalPrice:t,discountType:a>t?"PricingAgreement":"None",locationId:i,product:{...e,type:I(e),assetId:s.id}}})(o,a,t,d),c=(0,g.A)(((e,t)=>{var a,s,i,n,r;return null!==(a=window)&&void 0!==a&&null!==(a=a.tracking_data)&&void 0!==a&&a.asset_details?{billing_country:null===(n=window)||void 0===n||null===(n=n.tracking_data)||void 0===n?void 0:n.billing_country,billing_currency:(null===(r=window)||void 0===r||null===(r=r.tracking_data)||void 0===r?void 0:r.currency_code)||"USD",products:[e],purchase_type:"standard",location_id:t}:{billing_country:null===(s=window)||void 0===s||null===(s=s.tracking_data)||void 0===s?void 0:s.billing_country,billing_currency:(null===(i=window)||void 0===i||null===(i=i.tracking_data)||void 0===i?void 0:i.currency_code)||"USD",items:[e],purchase_type:"standard",location_id:t}})(l,d));(0,S.C)(c),e.sendAssetAddedToCartSignal(s)},B=async()=>!!await t.removeAssetFromCart(s.id);return(0,u.useMutation)({mutationFn:async({optionType:e,cartType:a,sizeCode:o,rawPrice:l,rawOriginalPrice:c})=>{if("customlicense"===e)a===D&&await B(),n?await(async()=>!!await t.addCustomLicensePricedAssetToCart(r,s.id)&&(window.eventBus&&(window.eventBus.triggerAllWindows("addToFancyCart"),window.eventBus.triggerAllWindows("priceCartItem")),!0))():await(async()=>!!await t.addAssetToCart(s.id)&&(window.eventBus&&window.eventBus.triggerAllWindows("addToFancyCart"),!0))();else{s.isEditorial()&&"standardlicense"===e&&a===D&&await B(),await(async e=>{let a;return a=d&&void 0!==y?await t.addPricedModifiedAssetToCart(s.id,s.licenseType.toLowerCase(),e,i,d,y):await t.addPricedAssetToCart(s.id,s.licenseType.toLowerCase(),e,i),!!a&&(window.eventBus&&(window.eventBus.triggerAllWindows("addToFancyCart"),window.eventBus.triggerAllWindows("priceCartItem")),!0)})(o)}return{rawPrice:l,rawOriginalPrice:c}},onSuccess:({rawOriginalPrice:e,rawPrice:t})=>(O({rawOriginalPrice:e,rawPrice:t}),a.invalidateQueries({queryKey:[h.A.CART_ASSET,s.id]}))})},k=a(90325),I=a(79124),R=a(28674),O=a(74848);const B=({buttonClass:e,cartType:t,cartText:a,buttonVariant:s})=>{const{selectedOption:n,selectedSize:u}=(0,I.A)(),{asset:p}=(0,c.Q)(),{hasSuccessfullyPurchasedBefore:g}=(0,d.Jd)(),{setHasUnsavedChanges:S}=(0,R.A)(),_=P(),{showEditor:h}=(0,k.A)(),{genId:y}=(0,l.A)(),w=null==n?void 0:n.type,{acquisitionType:D,pushAcquisitionView:A,setAcquisitionType:m}=(0,b.h)(),f=(0,r.F)(),T=(0,o.useExperience)("GettySrpAddToCart"),B="ExpA"===T.activeOffer("test");return h?null:(0,O.jsx)(i.Ay,{size:i.Ni.LARGE,fullWidth:!0,variant:s,className:e,onClick:()=>{_.mutate({optionType:w,cartType:t,sizeCode:null==u?void 0:u.name,rawPrice:null==u?void 0:u.rawPrice,rawOriginalPrice:null==u?void 0:u.rawOriginalPrice,genId:y,index:"1"}),(()=>{const e=D===C.A.LICENSE,t="film"===p.assetType;return e&&(!t||!g)})()?A(C.A.CART_ADP_CONFIRMATION):T.isActive()&&D===C.A.CART_SRP_SELECT&&B?A(C.A.CART_SRP_CONFIRMATION):t===v?window.location.assign(f.pathRef("cart",{})):D!==C.A.MODIFIED_DOWNLOAD&&D!==C.A.MODIFIED_LICENSE||m(C.A.MODIFIED_CART_CONFIRMATION),S(!1)},"data-testid":`${t}-cart`,children:a})};B.defaultProps={buttonClass:"",buttonVariant:i.Jr.PRIMARY};var x=B,N=a(82308),E=a(96123);const q=({btnClassNames:e,buttonVariant:t})=>{var a,i,r;const o=(0,s.c)(),{selectedOption:d,selectedSize:u}=(0,I.A)(),{asset:p}=(0,c.Q)(),{acquisitionType:g}=(0,b.h)(),{response:S}=(0,E.A)({assetId:p.id}),{selectedLimitedUseProduct:_}=(0,m.A)(),{response:{limitedUseProducts:h}={}}=(0,N.A)(),{hasUnsavedChanges:A}=(0,R.A)(),{genId:f}=(0,l.A)(),T={S:o("low"),M:o("medium"),L:o("high")},P="customlicense"===(null==d?void 0:d.type),k="standardlicense"===(null==d?void 0:d.type),B=p.isCreative()&&(null==S||null===(a=S.product)||void 0===a?void 0:a.sizeCode)===(null==u?void 0:u.name),q=k&&(null==S||null===(i=S.product)||void 0===i||null===(i=i.usage)||void 0===i?void 0:i.includes(T[null==u?void 0:u.label])),L=p.isEditorial()&&(null==S||null===(r=S.product)||void 0===r?void 0:r.usage)&&q,F=null==S?void 0:S.isPriced,V=null==S?void 0:S.salesOrderNote,M=!!V&&(null==h?void 0:h.some((e=>V.includes(`{${e.usage}}`)))),Q=!!V&&V.includes(`{${_}}`),j=B||L,U=(null==S?void 0:S.isPriced)&&j,$=_?!F&&!Q:!U&&!F,W=_?F&&!Q:!U&&F||M,z=_?Q:U&&!M;return P?S?S&&A?(0,O.jsx)(x,{buttonClass:e,buttonVariant:t,cartType:D,cartText:o("update_cart_caps")}):(0,O.jsx)(n.default,{buttonClass:e}):(0,O.jsx)(x,{buttonClass:e,buttonVariant:t,cartType:y,cartText:o("add_to_cart_caps")}):(()=>{if(g===C.A.CART_SRP_SELECT)return(0,O.jsx)(x,{buttonClass:e,buttonVariant:t,cartType:w,cartText:o("add_to_cart_caps")});if(u&&!u.license){if($)return(0,O.jsx)(x,{buttonClass:e,buttonVariant:t,cartType:w,cartText:o("add_to_cart_caps")});if(W)return(0,O.jsx)(x,{buttonClass:e,buttonVariant:t,cartType:D,cartText:o("update_cart_caps")});if(z)return f?(0,O.jsx)(x,{buttonClass:e,buttonVariant:t,cartType:v,cartText:o("view_cart_caps")}):(0,O.jsx)(n.default,{buttonClass:e,buttonVariant:t})}return null})()};q.defaultProps={btnClassNames:"",buttonVariant:i.Jr.PRIMARY};var L=q},34125:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});a(79998);var s,i=a(69205),n=a(47006);function r(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class o{}s=o,r(o,"isSameOrigin",(()=>{try{return window.opener.location.hostname===window.location.hostname}catch(e){return!1}})),r(o,"open",((e,t={target:"_blank",source:null,assets:null})=>{const{target:a,source:s,assets:i}=t;if(i&&window.localStorage.setItem("pager_items",JSON.stringify({source:s,assets:i})),window.isMobile)window.location.href=e;else{const t=e+(e.split("?")[1]?"&":"?")+"adppopup=true",s=`width=${.8*window.outerWidth},height=${.95*window.outerHeight},top=50,left=50,alwaysRaised=yes,toolbar=0,directories=0,menubar=0,status=1,resizable=yes,location=0, scrollbars=yes,copyhistory=0`;window.open(t,a,s)}})),r(o,"closeAndRedirect",(e=>{window.opener&&!window.opener.closed&&s.isSameOrigin()?(window.opener.location=e,window.close()):window.location=e}));var d=a(69668),l=a(2070),c=a(34504),u=a(59390),p=a(18628),g=a(52278),S=a(13620),_=a(77201),h=a(74848);const y=({buttonClass:e,buttonVariant:t})=>{const a=(0,n.c)(),{asset:s}=(0,_.Q)(),r=(0,i.F)(),{acquisitionType:y}=(0,g.h)(),w=(0,l.useExperience)("GettySrpAddToCart");return(0,h.jsx)(d.A,{buttonStyleProps:{size:c.Ni.LARGE,fullWidth:!0,variant:t},className:e,href:(()=>{let e={};return y===S.A.CART_ADP_CONFIRMATION&&(e={giAdpAtc:!0}),"ExpA"===w.activeOffer("test")&&y===S.A.CART_SRP_CONFIRMATION&&(e={giSrpAtc:!0}),r.pathRef("cart",e)})(),onClick:e=>{e.preventDefault();const t=(0,u.A)({cta_interaction:"cta_clicked",cta_text:"view_cart",item_id:s.assetId,ui_element_location:"adp_size_buy_card"});(0,p.C)(t),o.closeAndRedirect(e.target)},"data-testid":"view_cart",children:a("view_cart_caps")})};y.defaultProps={buttonClass:"",buttonVariant:c.Jr.PRIMARY};var w=y},96123:function(e,t,a){var s=a(12639),i=a(77015);const n=a(11298).A.CART_ASSET;t.A=({assetId:e})=>{const{cartsService:t}=(0,i.A)();return(0,s.t)([n,e],(async()=>{const a=await t.getAssetInCart(e);return a.id?a:null}))}},28674:function(e,t,a){var s=a(38055);const i=a(11298).A.HAS_UNSAVED_CHANGES;t.A=()=>{const e=(0,s.useQueryClient)(),{data:t}=(0,s.useSuspenseQuery)({queryKey:[i],queryFn:({queryKey:t})=>e.getQueryData(t),initialData:!0});return{hasUnsavedChanges:t,setHasUnsavedChanges:t=>{e.setQueryData([i],t)}}}},90325:function(e,t,a){var s=a(38055);const i=[a(11298).A.SHOW_EDITOR];t.A=()=>{const e=(0,s.useQueryClient)(),{data:t}=(0,s.useSuspenseQuery)({queryKey:i,queryFn:({queryKey:t})=>e.getQueryData(t)});return{showEditor:t,setShowEditor:t=>{e.setQueryData(i,t)}}}}}]);
//# sourceMappingURL=CartButtons-CartButton.bb44fcecbdb4a6f09db6.js.map